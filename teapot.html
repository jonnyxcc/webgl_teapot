<!DOCTYPE HTML> 
<html lang="en"> 
<head>
<title>Teapot</title>
<meta charset="utf-8"> 
</head>

    
<script id="shader-vs" type="x-shader/x-vertex">
	attribute vec3 aVertexPosition;
	attribute vec3 aVertexNormal;
	attribute vec2 aTexCoord;


	uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    uniform mat4 uNMatrix;


	varying vec3 fragNormal;
	varying vec2 vTexCoord;

	void main(void) {
    	gl_Position = uMVMatrix*vec4(aVertexPosition, 1.0);
    	fragNormal = (uMVMatrix*vec4(aVertexNormal, 0.0)).xyz;
    	vTexCoord=aTexCoord;
}
</script>
  
<script id="shader-fs" type="x-shader/x-fragment">
precision mediump float;

	varying vec3 fragNormal;

	uniform vec3 ambientLightIntensity;
	uniform vec3 sunlightIntensity;
	uniform vec3 sunlightDirection;

	uniform int teapot;
	uniform int reflect;
	uniform sampler2D uSampler;

	varying vec2 vTexCoord;

//varying vec4 vColor;
void main(void) {
	//vec3 ambientLightIntensity = vec3(0.8, 0.8, 0.8);
	//vec3 sunlightIntensity = vec3(0.9,0.9,0.9);
	//vec3 sunlightDirection = normalize(vec3(3.0, 4.0, -2.0));
	if (teapot == 1 && reflect == 1){
	vec3 surfaceNormal = normalize(fragNormal);
	vec3 normSunDir = normalize(sunlightDirection);

	vec4 texel = vec4(1.0,1.0,1.0,1.0);

	vec3 lightIntensity = ambientLightIntensity + sunlightIntensity * max(dot(fragNormal, sunlightDirection), 0.0);

	vec4 fragmentColor;
	fragmentColor = texture2D(uSampler, vTexCoord);

	gl_FragColor = vec4(texel.rgb * lightIntensity * fragmentColor.rgb, 1.0);
}
	else if (teapot==1){
			vec3 surfaceNormal = normalize(fragNormal);
	vec3 normSunDir = normalize(sunlightDirection);

	vec4 texel = vec4(1.0,1.0,1.0,1.0);

	vec3 lightIntensity = ambientLightIntensity + sunlightIntensity * max(dot(fragNormal, sunlightDirection), 0.0);

	vec4 fragmentColor;
	fragmentColor = texture2D(uSampler, vTexCoord);

	gl_FragColor = vec4(texel.rgb * lightIntensity, 1.0);
	}
	else
		gl_FragColor = texture2D(uSampler, vTexCoord);
		//gl_FragColor = vec4(0.0,0.0,0.0,1.0);
	//gl_FragColor = vec4(fragNormal, 1.0);
        //gl_FragColor = vec4(1.0,1.0,1.0,1.0);
 }
</script>


<script src="gl-matrix-min.js"></script>
<script type="text/javascript" src="webgl-utils.js"></script>
<script src="mp3.js"></script>   
<script src="obj2json.js"></script>
<script src="readText.js"></script>
<body onload="startup();">
  <canvas id="myGLCanvas" width="1000" height="1000"></canvas>
  	<p> Lit teapot, use options to orbit teapot, view geometry, view skybox attempt, reflection attempt </p>
	    <form id="input_form">
        <fieldset>
            <legend>Rendering Parameters</legend>
         <input type="checkbox" name="primitive" id="reflect_attempt" value="reflect_attempt"> Reflect attempt
         <input type="radio" name="primitive" id="skybox_attempt" value="skybox_attempt"> Skybox attempt
         <input type="checkbox" name="primitive" id="orbit" value="orbit"> Orbit
         <input type="radio" name="primitive" id="teapot_only" value="teapot_only" checked > Lit Teapot
        </fieldset>
        </form>
</body>

</html>